<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Page with AI Agent</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="navbar">
      <a class="hidden" href="#home" onclick="setActive('home')">Home</a>
      <a class="hidden" href="#services" onclick="setActive('services')"
        >Services</a
      >
      <a class="hidden" href="#about" onclick="setActive('about')">About</a>
      <a class="hidden" href="#contact" onclick="setActive('contact')"
        >Contact</a
      >
    </div>
    <div class="sidebar" id="sidebar">
      <!-- Sidebar content will be injected here based on the active navbar item -->
    </div>
    <div class="content">
      <h2 class="hidden" id="home1">Welcome to the Home Page</h2>
      <p class="hidden" id="home2">
        This is some hidden content for the home page.
      </p>
      <h2 class="hidden" id="services1">Our Services</h2>
      <p class="hidden" id="services2">
        This is some hidden content about our services.
      </p>
      <h2 class="hidden" id="about1">About Us</h2>
      <p class="hidden" id="about2">This is some hidden content about us.</p>
      <h2 class="hidden" id="contact1">Contact Us</h2>
      <p class="hidden" id="contact2">
        This is some hidden content for contacting us.
      </p>
    </div>

    <div class="agent" id="agentDiv"></div>
    <script>
      function setActive(section) {
        document
          .querySelectorAll(".navbar a")
          .forEach((a) => a.classList.remove("active"));
        document
          .querySelector(`.navbar a[href="#${section}"]`)
          .classList.add("active");

        const sidebarContent = {
          home: `
                <h3 class="hidden">Home</h3>
                <a class="hidden" href="#home1">Home Subitem 1</a>
                <a class="hidden" href="#home2">Home Subitem 2</a>
            `,
          services: `
                <h3 class="hidden">Services</h3>
                <a class="hidden" href="#services1">Service Subitem 1</a>
                <a class="hidden" href="#services2">Service Subitem 2</a>
            `,
          about: `
                <h3 class="hidden">About</h3>
                <a class="hidden" href="#about1">About Subitem 1</a>
                <a class="hidden" href="#about2">About Subitem 2</a>
            `,
          contact: `
                <h3 class="hidden">Contact</h3>
                <a class="hidden" href="#contact1">Contact Subitem 1</a>
                <a class="hidden" href="#contact2">Contact Subitem 2</a>
            `,
        };

        document.getElementById("sidebar").innerHTML = sidebarContent[section];
      }

      setActive("home");
    </script>
    <script type="module">
      import { Agent } from "./agent.js";

      const targets = [...document.querySelectorAll(".hidden")];
      let currentIndex = 0;

      const agent = new Agent(agentDiv, targets);
    </script>
  </body>
</html>
